---
layout: post
title: Tìm hiểu tổng quan về MongoDB
subtitle: Tổng quan về MongoDB

tags:
- MongoDB
- NoSQL
---

![MongoDB](https://boxxv.github.io/img/db/mongodb.jpg "MongoDB")

MongoDB là một chương trình cơ sở dữ liệu mã nguồn mở được thiết kế theo kiểu hướng đối tượng trong đó các bảng được cấu trúc một cách linh hoạt cho phép các dữ liệu lưu trên bảng không cần phải tuân theo một dạng cấu trúc nhất định nào. Chính do cấu trúc linh hoạt này nên MongoDB có thể được dùng để lưu trữ các dữ liệu có cấu trúc phức tạp và đa dạng và không cố định (hay còn gọi là Big Data).

Mongo viết bằng C++. Nó thích hợp cho các ứng dụng tầm trung trở lên. Nếu tỉ lệ lượng dữ liệu ghi vào CSDL của ứng dụng lớn hơn lượng đọc thì đây càng là lựa chọn hợp lý.

## 1. Định nghĩa về MongoDB

- MongoDB là một cơ sở dữ liệu mã nguồn mở và là cơ sở dữ liệu NoSQL(*) hàng đầu, được hàng triệu người sử dụng. MongoDB được viết bằng C++.
- Ngoài ra, MongoDB là một cơ sở dữ liệu đa nền tảng, hoạt động trên các khái niệm Collection và Document, nó cung cấp hiệu suất cao, tính khả dụng cao và khả năng mở rộng dễ dàng.
- NoSQL là 1 dạng CSDL mã nguồn mở không sử dụng Transact-SQL để truy vấn thông tin. NoSQL viết tắt bởi: None-Relational SQL, hay có nơi thường gọi là Not-Only SQL. CSDL này được phát triển trên Javascript Framework với kiểu dữ liệu JSON. (Cú pháp của JSON là “key:value”) NoSQL ra đời như là 1 mảnh vá cho những khuyết điểm và thiếu xót cũng như hạn chế của mô hình dữ liệu quan hệ RDBMS về tốc độ, tính năng, khả năng mở rộng, memory cache,...

## 2. Các thuật ngữ hay sử dụng trong MongoDB

- **_id** – Là trường bắt buộc có trong mỗi document. Trường _id đại diện cho một giá trị duy nhất trong document MongoDB. Trường _id cũng có thể được hiểu là khóa chính trong document. Nếu bạn thêm mới một document thì MongoDB sẽ tự động sinh ra một _id đại diện cho document đó và là duy nhất trong cơ sở dữ liệu MongoDB.
- **Collection** – Là nhóm của nhiều document trong MongoDB. Collection có thể được hiểu là một bảng tương ứng trong cơ sở dữ liệu RDBMS (Relational Database Management System). Collection nằm trong một cơ sở dữ liệu duy nhất. Các collection không phải định nghĩa các cột, các hàng hay kiểu dữ liệu trước.
- **Cursor** – Đây là một con trỏ đến tập kết quả của một truy vấn. Máy khách có thể lặp qua một con trỏ để lấy kết quả.
- **Database** – Nơi chứa các Collection, giống với cơ sở dữ liệu RDMS chúng chứa các bảng. Mỗi Database có một tập tin riêng lưu trữ trên bộ nhớ vật lý. Một mấy chủ MongoDB có thể chứa nhiều Database.
- **Document** – Một bản ghi thuộc một Collection thì được gọi là một Document. Các Document lần lượt bao gồm các trường tên và giá trị.
- **Field** – Là một cặp name – value trong một document. Một document có thể có không hoặc nhiều trường. Các trường giống các cột ở cơ sở dữ liệu quan hệ.
- **JSON** – Viết tắt của JavaScript Object Notation. Con người có thể đọc được ở định dạng văn bản đơn giản thể hiện cho các dữ liệu có cấu trúc. Hiện tại JSON đang hỗ trợ rất nhiều ngôn ngữ lập trình.
- **Index** – Là những cấu trúc dữ liệu đặc biệt, dùng để chứa một phần nhỏ của các tập dữ liệu một cách dễ dàng để quét. Chỉ số lưu trữ giá trị của một fields cụ thể hoặc thiết lập các fields, sắp xếp theo giá trị của các fields này. Index hỗ trợ độ phân tích một cách hiệu quả các truy vấn. Nếu không có chỉ mục, MongoDB sẽ phải quét tất cả các documents của collection để chọn ra những document phù hợp với câu truy vấn. Quá trình quét này là không hiệu quả và yêu cầu MongoDB để xử lý một khối lượng lớn dữ liệu.

Hãy lưu ý sự khác biệt của các trường và _id trong một document. Một _id được dùng để đại diện cho một document và chúng được sinh ra khi thêm một Document vào Collection.


## 3. Các kiểu dữ liệu trong MongoDB

- **Chuỗi**: Đây là kiểu dữ liệu được sử dụng phổ biến nhất để lưu giữ dữ liệu. Chuỗi trong MongoDB phải là UTF-8 hợp lệ.
- **Số nguyên**: Kiểu dữ liệu này được sử dụng để lưu một giá trị số. Số nguyên có thể là 32 bit hoặc 64 bit phụ thuộc vào Server của bạn.
- **Boolean**: Kiểu dữ liệu này được sử dụng để lưu giữ một giá trị Boolean (true/false).
- **Double**: Kiểu dữ liệu này được sử dụng để lưu các giá trị số thực dấu chấm động.
- **Min/ Max keys**: Kiểu dữ liệu này được sử dụng để so sánh một giá trị với các phần tử BSON thấp nhất và cao nhất.
- **Mảng**: Kiểu dữ liệu này được sử dụng để lưu giữ các mảng hoặc danh sách hoặc nhiều giá trị vào trong một key.
- **Timestamp**: Đánh dấu thời điểm một Document được sửa đổi hoặc được thêm vào.
- **Object**: Kiểu dữ liệu này được sử dụng cho các Document được nhúng vào.
- **Null**: Kiểu dữ liệu này được sử dụng để lưu một giá trị Null.
- **Symbol**: Kiểu dữ liệu này được sử dụng giống như một chuỗi
- **Date **: Kiểu dữ liệu này được sử dụng để lưu giữ date và time hiện tại trong định dạng UNIX time.
- **Object ID**: Kiểu dữ liệu này được sử dụng để lưu giữ ID của Document.
- **Binary data**: Kiểu dữ liệu này được sử dụng để lưu giữ dữ liệu nhị phân.
- **Code**: Kiểu dữ liệu này được sử dụng để lưu giữ JavaScrip code vào trong Document.
- **Regular expression**: Kiểu dữ liệu này được sử dụng để lưu giữ Regular Expresion.



### Sự tương quan các thuật ngữ được sử dụng trong MongoDB và SQL

| Operation | In SQL | In MongoDB |
| -- | -- | -- |
| Create | Insert | Insert |
| Read | Select | Find |
| Update | Update | Update |
| Delete | Delete | Remove |
| Table | Table | Collection |
| Row | Row | Document |


### Một số câu lệnh dùng trong MongoDB

**Create table**
```sql
CREATE TABLE people (id MEDIUMINT NOT NULL AUTO_INCREMENT, user_id Varchar(30), age Number, status char(1), PRIMARY KEY (id))

db.people.insertOne({User_id: “abc123”, Age: 55, Status: “A”})
```

**Drop table**
```sql
DROP TABLE people

db.people.drop()
```

**Insert records into tables**
```sql
INSERT INTO people(user_id, age, status) VALUES ("bcd001", 45, "A")

db.people.insertOne( { user_id: "bcd001", age: 45, status: "A" })
```

**Select**
```sql
SELECT *FROM people
db.people.find()

SELECT id,user_id, status FROM people
db.people.find( { }, { user_id: 1, status: 1 } )

SELECT * FROM people WHERE status = "A"
db.people.find( { status: "A" } )

SELECT * FROM people WHERE status = "A" AND age = 50
db.people.find( { status: "A", age: 50 } )

SELECT * FROM people WHERE status = "A" OR age = 50
db.people.find( { $or: [ { status: "A" } , { age: 50 } ] } )

SELECT * FROM people WHERE user_id like "%bc%"
db.people.find( { user_id: /bc/ } )
db.people.find( { user_id: { $regex: /bc/ } } )

SELECT COUNT(user_id) FROM people
db.people.count( { user_id: { $exists: true } } )
db.people.find( { user_id: { $exists: true } } ).count()
```

**Update records**
```sql
UPDATE people SET status = "C" WHERE age > 25
db.people.updateMany( { age: { $gt: 25 } }, { $set: { status: "C" } } )

UPDATE people SET age = age + 3 WHERE status = "A"
db.people.updateMany( { status: "A" } , { $inc: { age: 3 } } )
```

**Delete Records**
```sql
DELETE FROM people WHERE status = "D"
db.people.deleteMany( { status: "D" } )

DELETE FROM people
db.people.deleteMany({})
```


### Specify Conditions Using Query Operators

Bạn cũng có thể địn nghĩa các điều kiên bằng các biểu thức điều kiện với các toán tử so sanh cụ thể như sau :

| Biểu thức | Mô tả |
| -- | -- |
| $eq | Phép so sánh bằng |
| $ne | Phép so sánh khác (Nhận các giá trị không bằng) |
| $gt | Phép so sanh lớn hơn |
| $gte | Phép so sanh lớn hơn hoặc bằng |
| $lt | Phép so sánh nhỏ hơn |
| $lte | Phép so sánh nhỏ hơn hoặc bằng |
| $in | Phép so sánh với 1 trong các phần tử của mảng |
| $nin | Phép so sánh khác với tất cả các phần tử của mảng |

### Các toán tử logic

| Biểu thức | Mô tả |
| -- | -- |
| $and | Các bản ghi hợp lệ là các bản ghi đúng với tất cả điều kiện |
| $or | Các bản ghi hợp lệ là các bản ghi đúng với một trong các điều kiện |
| $not | Các bản ghi hợp lệ là các bản ghi không đúng 1 trong các điều kiện |
| $nor | Các bản ghi hợp lệ là các bản ghi không đúng với tất cả điều kiện |



-----
Tham khảo:
- [Mongo DB cho người mới bắt đầu!](https://viblo.asia/p/mongo-db-cho-nguoi-moi-bat-dau-Qbq5Qavz5D8)
- [Mongo DB cho người mới bắt đầu! (P2)](https://viblo.asia/p/mongo-db-cho-nguoi-moi-bat-dau-p2-gDVK2Bd0KLj)
- [Cơ sở dữ liệu MONGODB](https://viblo.asia/p/co-so-du-lieu-mongodb-57rVRqDQv4bP)
- [TÌM HIỂU VỀ MONGODB](https://viblo.asia/p/tim-hieu-ve-mongodb-4P856ajGlY3)
- [The SQL vs NoSQL difference: MySQL vs MongoDB](https://viblo.asia/p/the-sql-vs-nosql-difference-mysql-vs-mongodb-63vKj2WxK2R)
- [So sánh sự tương quan giữa MongoDB và SQL](https://viblo.asia/p/so-sanh-su-tuong-quan-giua-mongodb-va-sql-7prv31WBMKod)
- [Tìm hiểu tổng quan về NoSQL và MongoDB](https://viblo.asia/p/tim-hieu-tong-quan-ve-nosql-va-mongodb-oOVlYNbr58W)
- [Bắt đầu với NoSQL và MongoDB](https://viblo.asia/p/bat-dau-voi-nosql-va-mongodb-jvEla00zZkw)

